# 📊 AI科研助手系统 - 数据需求概览

**文档版本**: v1.0  
**创建日期**: 2025-12-09  
**用途**: 数据需求快速参考

---

## 📋 数据需求总览

| 需求ID | 需求名称 | 优先级 | 责任人 | 预计完成时间 |
|--------|---------|--------|--------|-------------|
| **REQ-D1** | 种子论文库（1000+篇） | P0 | @Dev-B | Sprint 1 |
| **REQ-D2** | 实体关系Schema定义 | P0 | @Dev-B | Sprint 1 |
| **REQ-D3** | 测试数据集（50+篇） | P0 | @QA | Sprint 1 |
| **REQ-D4** | 用户数据结构设计 | P0 | @Dev-D | Sprint 1 |
| **REQ-D5** | 图谱数据规模规划 | P0 | @Dev-B | Sprint 1 |
| **REQ-D6** | 关系数据库设计 | P0 | @Dev-D | Sprint 1 |
| **REQ-D7** | 数据质量标准 | P1 | @QA | Sprint 2 |
| **REQ-D8** | 数据获取流程 | P0 | @Dev-E | Sprint 2 |
| **REQ-D9** | 数据安全与隐私 | P1 | @DevOps | Sprint 2 |
| **REQ-D10** | 数据治理规范 | P2 | @PM | Sprint 3 |

---

## 🎯 关键数据指标

### 种子数据（系统启动前准备）

| 数据类型 | 目标数量 | 来源 | 状态 |
|---------|---------|------|------|
| 学术论文PDF | 1,000+ | arXiv + 会议论文 | ⚪ 待准备 |
| 测试论文 | 50+ | 手动收集 | ⚪ 待准备 |
| 标注数据 | 100+ | 人工标注 | ⚪ 待准备 |
| 测试用户 | 10+ | 模拟生成 | ⚪ 待准备 |

### 运行时数据规模预估

**Year 1 预估**:
```
图谱数据（Neo4j）:
├─ Paper节点: 50,000
├─ Method节点: 20,000
├─ Dataset节点: 5,000
├─ 其他节点: 10,000
├─ 关系总数: 250,000
└─ 存储需求: ~3GB

用户数据（PostgreSQL）:
├─ 用户数: 1,000
├─ 聊天历史: 120,000条
├─ 阅读历史: 60,000条
└─ 存储需求: ~1GB
```

---

## 📦 REQ-D1: 种子论文库

**目标**: 1000+篇高质量学术论文

**数据来源分配**:
```
arXiv (500篇):
├─ Computer Vision: 200篇
├─ Machine Learning: 200篇
└─ NLP: 100篇

经典论文 (300篇):
├─ 高引用论文 (>500 citations)
└─ 领域奠基性论文

最新会议 (200篇):
├─ CVPR/ICCV 2023-2024
├─ NeurIPS/ICML 2023-2024
└─ ACL/EMNLP 2023-2024
```

**数据格式要求**:
- ✅ PDF格式，可正常解析
- ✅ 完整元数据（标题、作者、年份、会议）
- ✅ 英文论文
- ✅ 文件大小 < 50MB
- ✅ 无损坏页面

**数据获取脚本**:
```python
# scripts/fetch_seed_papers.py
python scripts/fetch_seed_papers.py \
  --categories cs.CV,cs.AI,cs.LG \
  --start-date 2020-01-01 \
  --end-date 2024-12-31 \
  --limit 1000 \
  --output seeds/
```

**验收标准**:
- [ ] 论文数 ≥ 1000篇
- [ ] PDF解析成功率 > 95%
- [ ] 元数据完整率 > 90%
- [ ] 覆盖3+主要AI领域

---

## 📐 REQ-D2: Schema定义

**8种实体类型**:
1. **Paper** - 论文（必填：title, abstract, year）
2. **Method** - 方法（必填：name, description）
3. **Dataset** - 数据集（必填：name）
4. **Task** - 任务（必填：name）
5. **Metric** - 评价指标（必填：name）
6. **Author** - 作者（必填：name）
7. **Institution** - 机构（必填：name）
8. **Concept** - 概念（必填：name）

**9种关系类型**:
1. **PROPOSES** (Paper → Method) - 提出方法
2. **EVALUATES_ON** (Paper → Dataset) - 在数据集上评估
3. **SOLVES** (Method → Task) - 解决任务
4. **IMPROVES_OVER** (Method → Method) - 改进方法
5. **CITES** (Paper → Paper) - 引用
6. **USES_METRIC** (Paper → Metric) - 使用指标
7. **AUTHORED_BY** (Paper → Author) - 作者关系
8. **AFFILIATED_WITH** (Author → Institution) - 机构归属
9. **HAS_CONCEPT** (Paper → Concept) - 包含概念

**实现位置**:
- `app/schemas/entities.py` - 实体定义
- `app/schemas/relations.py` - 关系定义
- `app/schemas/validators.py` - 验证器

---

## 🧪 REQ-D3: 测试数据集

**测试PDF分类**:

```
标准论文（30篇）- 正常流程测试
├─ 结构完整（Abstract, Method, Experiments）
├─ 格式规范（双栏/单栏）
└─ 页数适中（8-15页）

边界案例（10篇）- 边界测试
├─ 超长论文（>30页）
├─ 超短论文（<5页）
└─ 特殊格式（预印本、workshop）

异常案例（10篇）- 异常处理测试
├─ 含大量公式
├─ 含大量图表
└─ 多语言混合
```

**标注数据（100篇）**:
```json
{
  "paper_id": "test_001",
  "ground_truth": {
    "entities": {
      "methods": ["ViT", "Self-Attention"],
      "datasets": ["ImageNet", "COCO"],
      "tasks": ["Image Classification"]
    },
    "relations": [
      {"type": "PROPOSES", "source": "paper", "target": "ViT"},
      {"type": "EVALUATES_ON", "source": "paper", "target": "ImageNet"}
    ]
  }
}
```

**用途**:
- 验证实体抽取准确率
- 验证关系抽取准确率
- 回归测试基准

---

## 👤 REQ-D4: 用户数据结构

**核心表结构**:

```sql
-- 用户表
CREATE TABLE users (
    user_id VARCHAR(50) PRIMARY KEY,
    username VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE,
    password_hash VARCHAR(255),
    user_role ENUM('student', 'researcher', 'teacher'),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP
);

-- 聊天历史
CREATE TABLE chat_history (
    id SERIAL PRIMARY KEY,
    user_id VARCHAR(50) REFERENCES users(user_id),
    message TEXT NOT NULL,
    response TEXT NOT NULL,
    tools_used JSONB,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    session_id VARCHAR(100)
);

-- 阅读历史
CREATE TABLE reading_history (
    id SERIAL PRIMARY KEY,
    user_id VARCHAR(50) REFERENCES users(user_id),
    paper_id VARCHAR(100),
    read_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    duration_seconds INT,
    completed BOOLEAN DEFAULT FALSE
);

-- 用户画像
CREATE TABLE user_profiles (
    user_id VARCHAR(50) PRIMARY KEY REFERENCES users(user_id),
    research_direction TEXT,
    interests JSONB,  -- [{"topic": "ViT", "weight": 0.95}]
    expertise_level VARCHAR(20),
    reading_count INT DEFAULT 0,
    updated_at TIMESTAMP
);
```

**索引设计**:
```sql
-- 性能优化索引
CREATE INDEX idx_chat_user_time ON chat_history(user_id, timestamp DESC);
CREATE INDEX idx_reading_user ON reading_history(user_id, read_at DESC);
CREATE INDEX idx_chat_session ON chat_history(session_id);
```

---

## 📈 REQ-D5: 图谱数据规模规划

**节点增长预估**:

| 时间点 | Paper | Method | Dataset | Task | 其他 | 总计 |
|-------|-------|--------|---------|------|------|------|
| Month 1 | 1,000 | 500 | 200 | 100 | 200 | 2,000 |
| Month 3 | 5,000 | 2,500 | 500 | 250 | 750 | 9,000 |
| Month 6 | 10,000 | 5,000 | 1,000 | 500 | 1,500 | 18,000 |
| Year 1 | 50,000 | 20,000 | 5,000 | 2,000 | 8,000 | 85,000 |

**关系增长预估**:
- 关系/节点比例: ~3:1
- Year 1 关系总数: ~250,000

**存储需求**:
```
Year 1 存储需求:
├─ 节点数据: 425MB
├─ 关系数据: 250MB
├─ 索引缓存: 2GB
├─ 备份空间: 3GB
└─ 总计: ~6GB
```

**性能指标**:
- 节点查询: < 100ms
- 2-hop遍历: < 500ms
- 混合搜索: < 2s
- 社区检测: < 5min（10k节点）

---

## 🔒 REQ-D7: 数据质量标准

**准确性要求**:
```
实体抽取:
├─ Precision: > 85%
├─ Recall: > 80%
└─ F1 Score: > 82%

关系抽取:
├─ Precision: > 75%
├─ Recall: > 70%
└─ F1 Score: > 72%

元数据准确性:
├─ 标题匹配: > 95%
├─ 作者识别: > 90%
└─ 年份准确: 100%
```

**完整性要求**:
```
Paper实体:
├─ 必填字段: 100%
└─ 可选字段: > 60%

关系数据:
├─ 有效关系: 100%（源和目标节点存在）
└─ 关系属性: > 70%
```

**一致性要求**:
```
实体归一化:
├─ 重复检测率: > 90%
└─ 自动合并准确率: > 85%

格式标准:
├─ 日期格式: ISO 8601
├─ 文本编码: UTF-8
└─ 数值精度: 小数点后2位
```

---

## 🔐 REQ-D9: 数据安全与隐私

**数据分类**:

| 级别 | 数据类型 | 保护措施 |
|-----|---------|---------|
| **Level 1** | 论文元数据、公开图谱数据 | 无需加密 |
| **Level 2** | 用户画像、聊天/阅读历史 | 传输加密 + 访问控制 |
| **Level 3** | 密码、个人身份信息 | 加密存储 + 严格访问控制 |

**加密标准**:
```
传输: HTTPS/TLS 1.3 (2048 bits)
存储: 
  - 密码: bcrypt (cost=12)
  - 敏感字段: AES-256
  - 数据库: TDE (Transparent Data Encryption)
```

**访问控制**:
```
原则: 最小权限
应用账号: 读写权限（限定表）
备份账号: 只读权限
管理账号: 全部权限（审计日志）
```

**隐私保护**:
- 测试环境数据脱敏
- 用户ID哈希处理
- 日志不记录敏感信息
- 用户数据可删除/导出

---

## 📅 数据准备时间表

### Sprint 1（Week 1-2）

**@Dev-B负责**:
- [ ] Day 1-2: 定义Schema（REQ-D2）
- [ ] Day 3-5: 编写数据获取脚本（REQ-D8）
- [ ] Day 6-10: 获取种子论文1000+篇（REQ-D1）

**@QA负责**:
- [ ] Day 1-5: 收集测试PDF 50+篇（REQ-D3）
- [ ] Day 6-10: 标注100篇论文数据（REQ-D3）

**@Dev-D负责**:
- [ ] Day 1-3: 设计数据库表结构（REQ-D4）
- [ ] Day 4-5: 编写数据库迁移脚本（REQ-D6）

### Sprint 2（Week 3-4）

**@Dev-E负责**:
- [ ] 实现数据获取Pipeline（REQ-D8）
- [ ] 批量摄入种子数据

**@QA负责**:
- [ ] 验证数据质量（REQ-D7）
- [ ] 生成测试用户数据

**@DevOps负责**:
- [ ] 配置数据备份策略（REQ-D9）
- [ ] 设置访问控制

---

## ✅ 数据验收清单

### 种子数据验收
- [ ] 论文数量 ≥ 1000篇
- [ ] PDF解析成功率 > 95%
- [ ] 实体抽取覆盖率 > 80%
- [ ] 元数据完整率 > 90%
- [ ] 摄入到图谱成功

### 测试数据验收
- [ ] 测试PDF ≥ 50篇（3类）
- [ ] 标注数据 ≥ 100篇
- [ ] 测试用户 ≥ 10个
- [ ] 标注一致性 > 90%

### 数据质量验收
- [ ] 实体抽取准确率 > 85%
- [ ] 关系抽取准确率 > 75%
- [ ] 数据完整性 > 90%
- [ ] 无重大数据质量问题

### 数据安全验收
- [ ] 传输加密配置正确
- [ ] 存储加密配置正确
- [ ] 访问控制规则生效
- [ ] 备份策略正常运行

---

## 📞 数据相关联系人

| 职责 | 负责人 | 邮箱 |
|-----|--------|------|
| 数据架构 | @Dev-B | dev-b@example.com |
| 数据质量 | @QA | qa@example.com |
| 数据安全 | @DevOps | ops@example.com |
| 数据治理 | @PM | pm@example.com |

---

## 📚 相关文档

- **完整PRD**: `PRD_产品需求文档.md` 第5章
- **数据库设计**: `PRD_产品需求文档.md` 第7.3节
- **API文档**: `http://localhost:8000/docs`
- **数据获取脚本**: `scripts/fetch_seed_papers.py`

---

**最后更新**: 2025-12-09  
**下次Review**: Sprint 1结束后

